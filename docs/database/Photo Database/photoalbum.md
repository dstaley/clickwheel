# PhotoAlbum (`mhba`)

An MHBA allows you to setup an Album of photos (grouping photos together in an album). The MHBA is implemented similar to playlist.

These are only supported on models that support photos.

Offset | Field | Size | Value
------ | ----- | ---- | -----
0 | header identifier | 4 | mhba
4 | header length | 4 | size of the mhba header (0x94)
8 | total length | 4 | size of the header and all child records
12 | Data Object Child Count | 4 | number of Data Objects in the List, probably always 1. Sometimes seems to be 2 in fifth-generation iPods' Photo Database, see below.
16 | Album Item Count | 4 | number of pictures in the album
20 | playlist id | 4 | a unique integer for each playlist - starts out at $64 and increments by 1. Really seems to be the total number of pictures (MHII) + photo album number (+1 for the first album, +2 for the second, etc. etc.)
24 | unk2 | 4 | unknown, seems to be always 0
28 | unk3 | 2 | unknown, seems to be always 0
30 | Album Type | 1 | 1 = master photo list ("Photo Library"), 2 = normal album, sometimes 4 and 5
31 | playMusic | 1 | play music during slideshow (from iPhoto setting)
32 | repeat | 1 | repeat the slideshow (from iPhoto setting)
33 | random | 1 | show the slides in random order (from iPhoto setting)
34 | showTitles | 1 | show slide captions (from iPhoto setting)
35 | transitionDirection | 1 | 0=none, 1=left-to-right, 2=right-to-left, 3=top-to-bottom, 4=bottom-to-top (from iPhoto setting)
36 | slideDuration | 4 | in seconds (from iPhoto setting)
40 | transitionDuration | 4 | in milliseconds (from iPhoto setting)
44 | unk7 | 4 | unknown, seems to always be 0
48 | unk8 | 4 | unknown, seems to always be 0
52 | dbid2 | 8 | dbid2 of track in iTunesDB to play during slideshow (from iPhoto setting)
60 | prev playlist id | 4 | the id of the previous playlist. Seems generated by this formula: value of the same field in the previous photo album MHBA + number of photos of the previous photo album + 1. In particular, this formula is valid starting from the second album: in fact, the value of this field for the library is 100, and for the first photo album is 101. Example: if the first album contains 50 photos, the value of this field in the second album will be 152.

The rest of the header is zero padded.

The MHBA has several children: The first is a MHOD containing the album name (which is ignored if the MHBA is the Photo Library). After that there are several MHIAs that define which image to show in that album. The MHBA that is marked as Photo Library contains one MHIA record for every photo on the iPod.

On fifth-generation iPod and iPod nano, the MHBA has a second MHOD as a child which contains a string of which specifies the transition effect configured in iPhoto for the slideshow associated with this album. Apparently, iPod ignores the slideshow settings that come from iPhoto, except for the slideshow soundtrack.
